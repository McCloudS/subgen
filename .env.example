# SubGen Environment Configuration
# Copy this file to .env and configure according to your setup
# Documentation: https://github.com/McCloudS/subgen

# ===========================
# Core Whisper Configuration
# ===========================

# Transcription device: 'cpu', 'gpu', or 'cuda'
TRANSCRIBE_DEVICE=cpu

# Whisper model to use
# Options: tiny, tiny.en, base, base.en, small, small.en, medium, medium.en,
#          large-v1, large-v2, large-v3, large, distil-large-v2, distil-large-v3,
#          distil-large-v3.5, distil-medium.en, distil-small.en, large-v3-turbo
WHISPER_MODEL=medium

# Number of files to transcribe in parallel
CONCURRENT_TRANSCRIPTIONS=2

# Number of threads to use during computation
WHISPER_THREADS=4

# Model storage path (for persistent model storage)
MODEL_PATH=/subgen/models

# Compute type: auto, int8, int8_float16, int16, float16, float32
# See: https://github.com/OpenNMT/CTranslate2/blob/master/docs/quantization.md
COMPUTE_TYPE=auto

# ===========================
# Processing Behavior
# ===========================

# Generate subtitles when media is added
PROCESS_ADDED_MEDIA=True

# Generate subtitles when media is played
PROCESS_MEDIA_ON_PLAY=True

# Transcribe or translate: 'transcribe' (same language) or 'translate' (to English)
TRANSCRIBE_OR_TRANSLATE=transcribe

# ===========================
# Subtitle Configuration
# ===========================

# Subtitle language code for filename (e.g., 'aa', 'en', 'es')
# Using 'aa' makes it appear higher in Plex subtitle list
SUBTITLE_LANGUAGE_NAME=aa

# Naming format: ISO_639_1, ISO_639_2_T, ISO_639_2_B, NAME, or NATIVE
SUBTITLE_LANGUAGE_NAMING_TYPE=ISO_639_2_B

# Skip if file has internal subtitles in this language (3-letter code)
SKIP_IF_INTERNAL_SUBTITLES_LANGUAGE=eng

# Skip if external subtitles with same language code already exist
SKIP_IF_EXTERNAL_SUBTITLES_EXIST=False

# Skip if target subtitle file already exists
SKIP_IF_TARGET_SUBTITLES_EXIST=True

# Skip if file has Subgen-generated subtitle
SKIP_ONLY_SUBGEN_SUBTITLES=False

# Show 'subgen' in subtitle filename
SHOW_IN_SUBNAME_SUBGEN=True

# Show model name in subtitle filename
SHOW_IN_SUBNAME_MODEL=True

# Add timestamp footer to subtitles
APPEND=False

# ===========================
# Language Detection & Filtering
# ===========================

# Force detected language to specific code (2-letter, e.g., 'fr', 'es')
FORCE_DETECTED_LANGUAGE_TO=

# Detect language using first X seconds of audio
DETECT_LANGUAGE_LENGTH=30

# Offset to start language detection (skip intros/songs)
DETECT_LANGUAGE_OFFSET=0

# Skip subtitle generation for these languages (pipe-separated, e.g., 'eng|deu')
SKIP_SUBTITLE_LANGUAGES=

# Preferred audio language if multiple tracks exist
PREFERRED_AUDIO_LANGUAGE=eng

# Preferred audio languages (pipe-separated list)
PREFERRED_AUDIO_LANGUAGES=eng

# Skip if audio track is in these languages (pipe-separated)
SKIP_IF_AUDIO_TRACK_IS=

# Skip if file has unknown language
SKIP_UNKNOWN_LANGUAGE=False

# Skip if no language set but subtitles exist
SKIP_IF_NO_LANGUAGE_BUT_SUBTITLES_EXIST=False

# Should Whisper detect audio language if not specified
SHOULD_WHISPER_DETECT_AUDIO_LANGUAGE=False

# ===========================
# Advanced Transcription Options
# ===========================

# Enable word-level highlighting in subtitles
WORD_LEVEL_HIGHLIGHT=False

# Use custom model prompt for punctuation
USE_MODEL_PROMPT=False

# Custom prompt text (only used if USE_MODEL_PROMPT=True)
CUSTOM_MODEL_PROMPT=

# Custom regrouping for cleaner subtitles (blank for default)
CUSTOM_REGROUP=cm_sl=84_sl=42++++++1

# Generate LRC files instead of SRT for audio files
LRC_FOR_AUDIO_FILES=True

# Advanced kwargs as Python dictionary (for experts)
SUBGEN_KWARGS={}

# ===========================
# Plex Configuration
# ===========================

# Plex server URL (e.g., http://192.168.1.100:32400)
PLEX_SERVER=http://plex:32400

# Plex authentication token
# Find at: https://support.plex.tv/articles/204059436-finding-an-authentication-token-x-plex-token/
PLEX_TOKEN=

# Queue next episode in series
PLEX_QUEUE_NEXT_EPISODE=False

# Queue entire season
PLEX_QUEUE_SEASON=False

# Queue entire series
PLEX_QUEUE_SERIES=False

# ===========================
# Jellyfin Configuration
# ===========================

# Jellyfin server URL (e.g., http://192.168.1.100:8096)
JELLYFIN_SERVER=http://jellyfin:8096

# Jellyfin API token (generate in Jellyfin dashboard)
JELLYFIN_TOKEN=

# ===========================
# Emby Configuration
# ===========================
# Note: Emby provides full info in webhooks, no token/server needed

# ===========================
# Server Configuration
# ===========================

# Webhook listening port
WEBHOOK_PORT=9000

# Enable debug logging
DEBUG=True

# Auto-update subgen.py from repository
UPDATE=False

# ===========================
# Path Mapping
# ===========================

# Enable path mapping for different filesystem structures
USE_PATH_MAPPING=False

# Path as seen by media server (e.g., /tv)
PATH_MAPPING_FROM=/tv

# Path as seen by SubGen container (e.g., /media/tv)
PATH_MAPPING_TO=/media/tv

# ===========================
# Batch Processing
# ===========================

# Folders to recursively scan for subtitle generation (pipe-separated)
# Example: /tv|/movies|/family-videos
TRANSCRIBE_FOLDERS=

# Monitor folders for real-time changes
MONITOR=False

# ===========================
# Performance & Resource Management
# ===========================

# Clear VRAM after transcription completes
CLEAR_VRAM_ON_COMPLETE=True

# ===========================
# Docker Volume Paths
# ===========================
# These are used in docker-compose.yml

# Path to TV shows on host
TV_PATH=/path/to/tv

# Path to Movies on host
MOVIES_PATH=/path/to/movies

# Path for model storage on host
MODELS_PATH=/path/to/appdata/subgen/models

# Path for config storage on host (optional)
CONFIG_PATH=/path/to/appdata/subgen
